# Checkpoint 05012026_2055

## Context
- Reviewed `polymercado.db` for notable patterns / potential "arb" signals and general anomalies.
- Fixed repo hygiene: SQLite DB artifacts should not be tracked in git.

## DB snapshot notes (local file state)
- `trades`: 616 rows (appears to be “large trade” feed only, not full tape).
- `orderbook_levels`: 2,424 rows covering 606 markets (4 rows/market: 2 tokens × BID/ASK).
- `market_metrics_ts`: 204,093 rows (mostly Gamma volume/liquidity snapshots; only 1,386 rows include both YES+NO ask/bid data).
- Latest timestamps in this DB:
  - `trades.max(trade_ts)`: 2026-01-05 00:37:41
  - `orderbook_levels.max(as_of)`: 2026-01-05 00:38:15
  - `market_metrics_ts.max(ts)`: 2026-01-05 00:34:34

## Findings
### 1) No within-market “buy both sides” arb in available books
- Computed best asks from `orderbook_levels` (min ask price per token) and mapped YES/NO via `markets.outcomes` + `markets.token_ids`.
- Markets with both YES and NO asks present: 373.
- `min(yes_ask + no_ask) = 1.001` and `count(sum_asks < 1.0) = 0`.
- Interpretation: arb screener returning no arbs can be legit given this snapshot; anything real-time would require fresher books.

### 2) Large trades are dominated by sports; non-sports are a small slice
- Large-trade counts:
  - sports: 392 trades, ~$12.55M notional
  - non-sports: 41 trades, ~$1.18M notional
- Biggest non-sports clusters by total large-trade notional:
  - “Maduro in U.S. custody by January 31?”: ~$379k across 6 trades.
  - “Bitcoin Up or Down - January 4, 4PM ET”: $140k across 7 trades (two wallets, repetitive at 0.5).

### 3) Open interest (available for only 44 markets) highlights a few non-sports “attention magnets”
- Highest non-sports open interest in this snapshot:
  - “Maduro in U.S. custody by January 31?”: OI ~$2.11M.
  - “Will Bitcoin dip to $86,000 Dec 29–Jan 4?”: OI ~$351k.
  - “Over $5M committed to the Infinex public sale?”: OI ~$341k.
- A useful ranking is `open_interest / gamma_liquidity` (higher suggests more crowded vs depth):
  - “Will Bitcoin dip to $86,000 Dec 29–Jan 4?”: ~11.6
  - “Over $5M committed to the Infinex public sale?”: ~6.6

### 4) Tag metadata coverage is incomplete (affects tag-based filtering/analytics)
- `tags` table has 2,000 rows, but `markets.tag_ids` references many ids not present:
  - ~19,197 markets have ≥1 missing tag reference.
  - ~46,201 missing tag-id references total.
- This likely means Gamma `/tags` ingestion needs pagination/full sync. Until fixed, many markets will not have `tag_slugs/labels` populated reliably.

## Repo hygiene changes
- Added SQLite patterns to `.gitignore`.
- Removed tracked `polymercado.db` from git index (kept file locally).
- Note: file still exists in git history; fully purging it would require history rewrite (`git filter-repo`), if desired.

## Follow-ups (not done)
- Fix Gamma tag ingestion to fetch all tags (pagination) so category filtering works broadly.
- Add a repeatable “DB insights” script/query set for quick analysis and regression checks.
